<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Alfabeto Modular</title>
    <!-- Viewport optimizado para evitar zoom accidental en inputs y mejorar respuesta -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css?v=3">
  </head>
  <body>
    <h1>ALFABETO MODULAR</h1>

    <div id="nav-container">
      <button class="nav-tab active" data-mode="home">INICIO</button>
      <button class="nav-tab" data-mode="generator">GENERADOR</button>
      <button class="nav-tab" data-mode="game">JUEGO 3D</button>

      <!-- Separator -->
      <div style="flex-grow: 1;"></div>

      <!-- Theme Toggle -->
      <button id="themeButton" title="Cambiar tema" aria-label="Cambiar tema oscuro/claro" onclick="toggleGlobalTheme()">‚òæ</button>

      <!-- Color Hints Toggle (Circular Button) -->
      <button id="colorHintsButton" title="Activar/Desactivar colores" aria-label="Activar o desactivar pistas de color" onclick="toggleColorHints()" style="display: none;">üé®</button>
    </div>

    <div id="canvas-wrapper">
      <div id="canvas-container"></div>
    </div>

    <!-- UI Container para Home / Intro -->
    <div id="home-ui-container" class="mode-ui" data-mode="home">
      <div class="legend-overlay" id="legendOverlay">
        <h2>GU√çA DE C√ìDIGOS</h2>
        
        <div class="legend-section collapsed" id="section1">
          <h3 onclick="toggleSection('section1')">SISTEMA CROM√ÅTICO</h3>
          <div class="legend-section-content">
            <p class="legend-desc">Los m√≥dulos se colorean seg√∫n su rama estructural en el alfabeto.</p>
            <div class="color-guide">
              <div class="guide-item"><span class="swatch" style="background:#FF0000"></span> A-F</div>
              <div class="guide-item"><span class="swatch" style="background:#FFCC00"></span> G-L</div>
              <div class="guide-item"><span class="swatch" style="background:#00CC99"></span> M-R</div>
              <div class="guide-item"><span class="swatch" style="background:#3366FF"></span> S-X</div>
              <div class="guide-item"><span class="swatch" style="background:#9933CC"></span> Y-√ë</div>
              <div class="guide-item"><span class="swatch" style="background:#FF33CC"></span> 0-9</div>
              <div class="guide-item"><span class="swatch" style="background:#00CCFF"></span> .?!</div>
            </div>
          </div>
        </div>
        
        <div class="legend-section collapsed" id="section2">
          <h3 onclick="toggleSection('section2')">ALFABETO BINARIO</h3>
          <div class="legend-section-content">
            <p class="legend-desc">Cada car√°cter es una representaci√≥n de 8 bits posicionales.</p>
            
            <!-- Nueva √°rea de previsualizaci√≥n visual -->
            <div id="char-preview-panel">
              <div class="preview-left">
                <div class="preview-visual-host" id="previewVisual"></div>
                <span class="preview-char" id="previewText">?</span>
              </div>
              <span class="preview-info" id="previewDesc">Toca un s√≠mbolo</span>
            </div>

            <div id="alphabet-grid">
              <!-- Se rellenar√° din√°micamente con JS -->
              <div class="alpha-placeholder">Generando gu√≠a...</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- UI Container espec√≠fico para el Generador -->
    <div id="ui-container" class="mode-ui" data-mode="generator" style="display:none;">
      <input id="textInput" type="text" placeholder="Escribe tu frase..." />
      <button id="generateButton">GENERAR</button>
      <button id="saveButton">GUARDAR</button>
    </div>

    <!-- UI Placeholder para el Juego -->
    <div id="game-ui-container" class="mode-ui" data-mode="game" style="display: none;">
      <div class="game-hud">
        <div class="score-board">PUNTOS: <span id="scoreVal">0</span></div>
        <div class="target-display">
          <span class="label">TRADUCE:</span>
          <h2 id="targetWordDisplay">Cargando...</h2>
        </div>
        <div id="feedbackDisplay" class="feedback-msg"></div>
        <div class="instructions">Busca y haz clic en la letra modular correcta</div>
      </div>
    </div>

    <footer>
      Hecho con p5.js ‚Ä¢ Proyecto experimental ‚Ä¢ Manuel Ca√±as Vidaller
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
    <script src="js/modes/shared.js"></script>
    <script src="js/modes/home.js"></script>
    <script src="js/modes/generator.js"></script>
    <script src="js/modes/game.js"></script>

    <!-- Main Logic -->
    <script src="js/app.js"></script>
    <script>
      // Fallback simple para desarrollo o si algo falla en carga
      console.log('Modular Alphabet Loaded');
    </script>
  </body>
</html>
